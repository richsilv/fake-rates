{"version":3,"file":"/packages/fake-rates.js","sources":["fake-rates/prices.js","fake-rates/fakerates.js"],"names":[],"mappings":";;;;;;;;AAAA,c;AACA,uB;AACA,wB;AACA,oB;AACA,oB;AACA,qB;AACA,qB;AACA,oB;AACA,oB;AACA,sB;AACA,uB;AACA,qB;AACA,oB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,uB;AACA,oB;AACA,qB;AACA,uB;AACA,oB;AACA,sB;AACA,uB;AACA,oB;AACA,uB;AACA,oB;AACA,oB;AACA,sB;AACA,oB;AACA,oB;AACA,uB;AACA,qB;AACA,oB;AACA,oB;AACA,uB;AACA,sB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,sB;AACA,qB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,uB;AACA,oB;AACA,uB;AACA,qB;AACA,uB;AACA,uB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,sB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,sB;AACA,uB;AACA,sB;AACA,uB;AACA,oB;AACA,qB;AACA,sB;AACA,uB;AACA,qB;AACA,oB;AACA,sB;AACA,qB;AACA,oB;AACA,sB;AACA,wB;AACA,qB;AACA,sB;AACA,oB;AACA,oB;AACA,uB;AACA,qB;AACA,oB;AACA,qB;AACA,sB;AACA,oB;AACA,oB;AACA,qB;AACA,qB;AACA,sB;AACA,oB;AACA,oB;AACA,sB;AACA,oB;AACA,qB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,sB;AACA,qB;AACA,sB;AACA,sB;AACA,sB;AACA,oB;AACA,uB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,sB;AACA,oB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,wB;AACA,qB;AACA,qB;AACA,qB;AACA,oB;AACA,oB;AACA,oB;AACA,qB;AACA,qB;AACA,qB;AACA,oB;AACA,sB;AACA,oB;AACA,sB;AACA,oB;AACA,qB;AACA,oB;AACA,uB;AACA,qB;AACA,oB;AACA,uB;AACA,oB;AACA,mB;AACA,E;;;;;;;;;;;;;;;;;;AChKA,mC;;AAEA,6C;;AAEA,kB;AACA,4D;AACA,iB;AACA,Y;;AAEA,gC;AACA,uC;AACA,E;AACA,gC;AACA,sC;AACA,E;AACA,O;AACA,0F;AACA,E;;AAEA,yB;AACA,wB;AACA,kC;AACA,6C;AACA,kD;AACA,iC;AACA,mC;AACA,0C;;AAEA,qB;;AAEA,mH;AACA,C;AACA,E;;AAEA,iC;AACA,E;AACA,wD;;AAEA,E;;AAEA,0B;AACA,C;AACA,iE;AACA,qC;AACA,uC;;AAEA,iD;AACA,6C;AACA,gD;AACA,E;AACA,e;AACA,iC;AACA,a;AACA,e;AACA,iB;AACA,qB;AACA,sB;AACA,G;;AAEA,sB;;AAEA,uC;;AAEA,8C;;AAEA,8D;;AAEA,E;;AAEA,yB;;AAEA,uB;AACA,uC;AACA,yB;AACA,Y;AACA,G;AACA,M;AACA,Y;;AAEA,G;;AAEA,sC;;AAEA,6D;;AAEA,E","sourcesContent":["seedPrices = {\n\t\"USDKRW\": 1122.449951,\n\t\"USDVND\": 20865.000000,\n\t\"USDBOB\": 6.910000,\n\t\"USDMOP\": 7.995750,\n\t\"USDBDT\": 78.070000,\n\t\"USDMDL\": 12.280000,\n\t\"USDVEF\": 6.287700,\n\t\"USDGEL\": 1.657000,\n\t\"USDISK\": 117.410004,\n\t\"USDBYR\": 8670.000000,\n\t\"USDTHB\": 28.844999,\n\t\"USDTND\": 1.603500,\n\t\"USDJMD\": 99.099998,\n\t\"USDDKK\": 5.718700,\n\t\"USDSRD\": 3.275000,\n\t\"USDBWP\": 8.188300,\n\t\"USDNOK\": 5.799550,\n\t\"USDMUR\": 31.129999,\n\t\"USDZMK\": 5195.000000,\n\t\"USDAZN\": 0.784700,\n\t\"USDINR\": 54.210499,\n\t\"USDMGA\": 2160.000000,\n\t\"USDCAD\": 1.027095,\n\t\"USDXAF\": 502.649048,\n\t\"USDLBP\": 1504.000000,\n\t\"USDXDR\": 0.664350,\n\t\"USDIDR\": 9710.000000,\n\t\"USDIEP\": 0.603482,\n\t\"USDAUD\": 0.972200,\n\t\"USDMMK\": 880.500000,\n\t\"USDLYD\": 1.281000,\n\t\"USDZAR\": 9.190750,\n\t\"USDIQD\": 1163.000000,\n\t\"USDXPF\": 91.400002,\n\t\"USDTJS\": 4.761600,\n\t\"USDCUP\": 1.000000,\n\t\"USDUGX\": 2557.500000,\n\t\"USDNGN\": 158.399994,\n\t\"USDPGK\": 2.184200,\n\t\"USDTOP\": 1.741686,\n\t\"USDTMT\": 2.850000,\n\t\"USDKES\": 83.900002,\n\t\"USDCRC\": 499.399994,\n\t\"USDMZN\": 30.330000,\n\t\"USDSYP\": 70.230003,\n\t\"USDANG\": 1.790000,\n\t\"USDZMW\": 5.335000,\n\t\"USDBRL\": 2.001150,\n\t\"USDBSD\": 1.000000,\n\t\"USDNIO\": 24.965000,\n\t\"USDGNF\": 7062.000000,\n\t\"USDBMD\": 1.000000,\n\t\"USDSLL\": 4313.799805,\n\t\"USDMKD\": 47.029999,\n\t\"USDBIF\": 1560.000000,\n\t\"USDLAK\": 7825.500000,\n\t\"USDBHD\": 0.376960,\n\t\"USDSHP\": 0.656350,\n\t\"USDBGN\": 1.494700,\n\t\"USDSGD\": 1.236840,\n\t\"USDCNY\": 6.176800,\n\t\"USDEUR\": 0.767065,\n\t\"USDTTD\": 6.420000,\n\t\"USDSCR\": 11.770000,\n\t\"USDBBD\": 2.000000,\n\t\"USDSBD\": 7.209613,\n\t\"USDMAD\": 8.528000,\n\t\"USDGTQ\": 7.792500,\n\t\"USDMWK\": 415.600006,\n\t\"USDPKR\": 98.410004,\n\t\"USDPEN\": 2.593000,\n\t\"USDAED\": 3.672750,\n\t\"USDLVL\": 0.537300,\n\t\"USDUAH\": 8.136000,\n\t\"USDLRD\": 74.000000,\n\t\"USDLSL\": 9.190000,\n\t\"USDSEK\": 6.502500,\n\t\"USDRON\": 3.350200,\n\t\"USDXOF\": 503.200012,\n\t\"USDCOP\": 1849.000000,\n\t\"USDCDF\": 919.411316,\n\t\"USDTZS\": 1626.500000,\n\t\"USDGHS\": 1.949300,\n\t\"USDNPR\": 86.349998,\n\t\"USDZWL\": 322.355011,\n\t\"USDSOS\": 1550.000000,\n\t\"USDDZD\": 78.543999,\n\t\"USDFKP\": 0.656300,\n\t\"USDLKR\": 125.550003,\n\t\"USDJPY\": 97.355003,\n\t\"USDCHF\": 0.931370,\n\t\"USDCLP\": 474.450012,\n\t\"USDIRR\": 12285.000000,\n\t\"USDAFN\": 52.970001,\n\t\"USDDJF\": 179.699997,\n\t\"USDSVC\": 8.747500,\n\t\"USDPLN\": 3.158050,\n\t\"USDPYG\": 4130.000000,\n\t\"USDETB\": 18.551901,\n\t\"USDILS\": 3.632000,\n\t\"USDTWD\": 29.931999,\n\t\"USDKPW\": 900.000000,\n\t\"USDGIP\": 0.656350,\n\t\"USDBND\": 1.235550,\n\t\"USDHNL\": 19.370001,\n\t\"USDCZK\": 19.832500,\n\t\"USDHUF\": 226.449997,\n\t\"USDBZD\": 2.020000,\n\t\"USDJOD\": 0.708150,\n\t\"USDRWF\": 636.000000,\n\t\"USDLTL\": 2.649000,\n\t\"USDRUB\": 31.840000,\n\t\"USDRSD\": 85.410500,\n\t\"USDWST\": 2.224969,\n\t\"USDPAB\": 1.000000,\n\t\"USDNAD\": 9.185000,\n\t\"USDDOP\": 41.125000,\n\t\"USDALL\": 107.574997,\n\t\"USDHTG\": 42.500000,\n\t\"USDAMD\": 418.299988,\n\t\"USDKMF\": 376.986786,\n\t\"USDMRO\": 270.250000,\n\t\"USDHRK\": 5.839250,\n\t\"USDKHR\": 3985.000000,\n\t\"USDPHP\": 41.250000,\n\t\"USDKWD\": 0.284750,\n\t\"USDXCD\": 2.700000,\n\t\"USDCNH\": 6.182800,\n\t\"USDSDG\": 4.402500,\n\t\"USDCLF\": 0.020730,\n\t\"USDKZT\": 150.994995,\n\t\"USDTRY\": 1.798550,\n\t\"USDFJD\": 1.765200,\n\t\"USDNZD\": 1.184329,\n\t\"USDBAM\": 1.504050,\n\t\"USDBTN\": 54.160000,\n\t\"USDSTD\": 18675.000000,\n\t\"USDVUV\": 91.400002,\n\t\"USDMVR\": 15.420000,\n\t\"USDAOA\": 96.010498,\n\t\"USDEGP\": 6.897150,\n\t\"USDQAR\": 3.640800,\n\t\"USDOMR\": 0.384950,\n\t\"USDCVE\": 84.139999,\n\t\"USDKGS\": 48.277199,\n\t\"USDMXN\": 12.249550,\n\t\"USDMYR\": 3.030500,\n\t\"USDGYD\": 203.600006,\n\t\"USDSZL\": 9.193000,\n\t\"USDYER\": 214.455002,\n\t\"USDSAR\": 3.750300,\n\t\"USDUYU\": 18.830000,\n\t\"USDGBP\": 0.655766,\n\t\"USDUZS\": 2054.300049,\n\t\"USDGMD\": 34.000000,\n\t\"USDAWG\": 1.789700,\n\t\"USDMNT\": 1407.500000,\n\t\"USDHKD\": 7.762935,\n\t\"USDARS\": 5.156000\n};","var events = Npm.require('events');\n\nFakeRates = function(currencyPair, options) {\n\n\tvar _this = this,\n\t\taltPair = currencyPair.slice(3) + currencyPair.slice(0,3),\n\t\tcurrentTimeout,\n\t\tseedPrice;\n\n\tif (seedPrices[currencyPair]) {\n\t\tseedPrice = seedPrices[currencyPair];\n\t}\n\telse if (seedPrices[altPair]) {\n\t\tseedPrice = 1 / seedPrices[altPair];\n\t}\n\telse {\n\t\treturn new Meteor.Error(500, \"Cannot find currency pair\", {currencyPair: currencyPair});\n\t}\n\n\toptions = options || {};\n\tthis._id = Random.id();\n\tthis.currencyPair = currencyPair;\n\tthis.price = options.seedPrice || seedPrice;\n\tthis.spread = options.spread || seedPrice / 1000;\n\tthis.delay = options.delay || 1;\n\tthis.stdDev = options.stdDev || 1;\n\tthis.emitter = new events.EventEmitter();\n\n\tfunction stdNorm() {\n\n\t\treturn ((Math.random() + Math.random() + Math.random() + Math.random() + Math.random() + Math.random()) - 3) / 3;\n\t\n\t}\n\n\tfunction poisson(expectedValue){\n\t \n\t    return - Math.log( Math.random() ) * expectedValue;\n\n\t}\n\n\tfunction nextEmission() {\n\t\n\t\tvar price = _this.price * (1 + stdNorm() * _this.stdDev / 100);\n\t\tvar bid = price - _this.spread / 2;\n\t\tvar offer = price + _this.spread / 2;\n\n \t\tprice = Math.floor(price * 1000000) / 1000000;\n\t\tbid =  Math.floor(bid * 1000000) / 1000000;\n\t\toffer = Math.floor(offer * 1000000) / 1000000;\n\t\t\n\t\tvar event = {\n\t\t\t'ticker' : _this.currencyPair,\n\t\t\t'bid':bid,\n\t\t\t'mid':price,\n\t\t\t'offer':offer,\n\t\t\t'time':new Date(),\n\t\t\t'emitter':_this._id\n\t\t}\n\n\t\t_this.price = price;\n\n\t\t_this.emitter.emit('price', event);\t\t\n\n\t\tvar nextDelay = poisson(_this.delay * 1000);\n\n\t\tcurrentTimeout = Meteor.setTimeout(nextEmission, nextDelay);\n\n\t}\n\n\tthis.stop = function() {\n\n\t\tif (currentTimeout) {\n\t\t\tMeteor.clearTimeout(currentTimeout);\n\t\t\tcurrentTimeout = null;\n\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t\treturn 0;\n\n\t};\n\n\tvar nextDelay = poisson(_this.delay);\n\n\tcurrentTimeout = Meteor.setTimeout(nextEmission, nextDelay);\n\n};"]}